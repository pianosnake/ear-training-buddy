<!DOCTYPE html>
<html lang="en">
<head>
  <title>JS.ET</title>
  <meta charset="utf-8">
  <link href="css/jset.css" rel="stylesheet" type="text/css" />
  <script src="js/Wave.js"></script>
  <script src="js/RandomChord.js"></script>
</head>

<body>
<div class="container">
  <h1>JS.ET</h1>

  <div class="btn w-100" onclick="playReference()">Reference A4</div>
  <div class="btn w-100" onclick="playRandomChord()">Random Chord</div>
  <div class="btn w-50" onclick="repeatLastChord()">Harmonic</div>
  <div class="btn w-50" onclick="repeatLastChord(true)">Melodic</div>
  <div class="btn w-100" onclick="reveal()">Reveal Last Chord</div>

  <div class="answer"></div>
</div>
<script>
  const answerDiv = document.getElementsByClassName('answer')[0];

  const referenceNote = new Note(69);

  const bottomNote = 60; //C4
  const chordSpan = 12; //one octave of questions
  let currentChord;

  function playReference(){
    referenceNote.play();
  }

  function playRandomChord(){
    referenceNote.stop();
    currentChord = new RandomChord(bottomNote, chordSpan);
    currentChord.play();
    answerDiv.innerHTML = '';
  }

  function repeatLastChord(melodic){
    if(!currentChord){
      answerDiv.innerHTML = 'Play a chord first';
      return;
    }
    currentChord.play(melodic);
  }

  function reveal(){
    if(!currentChord){
      answerDiv.innerHTML = 'Play a chord first';
      return;
    }
    answerDiv.innerHTML = currentChord.name;
  }
</script>

</body>
</html>