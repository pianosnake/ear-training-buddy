!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var s=n(1);const i=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];t.a=class extends s.a{constructor(e){super(),this.value=e,this._name=function(e){const t=Math.floor(e/12)-1;return i[e%12]+t}(e),this.file="./sounds/"+this._name+"-97-127.mp3",this.notes=[this],this.buffer}get name(){return"b"===this._name[1]?this._name.replace("b","â™­").slice(0,-1):this._name.slice(0,-1)}getAudio(e){return new Promise((t,n)=>{if(this.buffer)return void t(this.buffer);const s=new XMLHttpRequest;s.open("GET",this.file,!0),s.responseType="arraybuffer",s.onload=(()=>{e.decodeAudioData(s.response,e=>{this.buffer=e,t(this.buffer)})}),s.onerror=(e=>n(e)),s.send()})}}},function(e,t,n){"use strict";t.a=class{constructor(){window.audioContext||(window.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext=window.audioContext,this.compressor=this.audioContext.createDynamicsCompressor(),this.compressor.attack.value=.03,this.masterGainNode=this.audioContext.createGain(),this.masterGainNode.connect(this.compressor),this.compressor.connect(this.audioContext.destination)}play(e){this.masterGainNode.gain.setValueAtTime(1,this.audioContext.currentTime),Promise.all(this.notes.map(e=>e.getAudio(this.audioContext))).then(()=>{this.notes.forEach((t,n)=>{const s=this.audioContext.createBufferSource(),i=this.audioContext.createGain(),o=e?n*e:0;s.buffer=t.buffer,s.connect(i),i.connect(this.masterGainNode),i.gain.setTargetAtTime(0,this.audioContext.currentTime+o,.5),s.start(this.audioContext.currentTime+o,0,3)})})}stop(){this.masterGainNode.gain.setValueAtTime(0,this.audioContext.currentTime)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),new(n(3).a)({answerDiv:document.getElementById("answer"),playBtn:document.getElementById("playBtn"),hintBtn:document.getElementById("hintBtn"),answerBtn:document.getElementById("answerBtn"),referenceBtn:document.getElementById("referenceBtn"),note1Radio:document.getElementById("note1"),note2Radio:document.getElementById("note2"),note3Radio:document.getElementById("note3"),note4Radio:document.getElementById("note4")})},function(e,t,n){"use strict";var s=n(0),i=n(4),o=n(5);const r=new s.a(69),a=57,d=15;let c,h=!0,u=1,p=0;t.a=class{constructor(e){e.playBtn.addEventListener("click",()=>this.playQuestion()),e.hintBtn.addEventListener("click",()=>this.hint()),e.referenceBtn.addEventListener("click",()=>this.playReference()),e.answerBtn.addEventListener("click",()=>this.showAnswer()),e.note1Radio.addEventListener("click",()=>this.setQuestionType(1)),e.note2Radio.addEventListener("click",()=>this.setQuestionType(2)),e.note3Radio.addEventListener("click",()=>this.setQuestionType(3)),e.note4Radio.addEventListener("click",()=>this.setQuestionType(4)),this.playBtn=e.playBtn,this.answerDiv=e.answerDiv,new o.a("r",()=>this.playQuestion()),new o.a("a",()=>this.playReference()),new o.a("h",()=>this.hint()),new o.a(" ",()=>this.showAnswer())}showMsg(e){this.answerDiv.innerHTML=e}playReference(){r.play()}playQuestion(){h?(h=!1,r.stop(),p=0,(c=1===u?new s.a(a+Math.floor(Math.random()*d)):new i.a(a,d,u)).play(),this.showMsg(""),this.playBtn.innerHTML="Repeat"):this.repeatLastQuestion()}repeatLastQuestion(e){c?c.play(e):this.showMsg("Play something first")}hint(){p++,this.repeatLastQuestion(.15*p),p>2&&(p=0)}showAnswer(){c?(this.repeatLastQuestion(),h=!0,this.showMsg(c.name),this.playBtn.innerHTML="New"):this.showMsg("Play something first")}setQuestionType(e){this.playBtn.innerHTML="New",h=!0,u=e}}},function(e,t,n){"use strict";var s=n(1),i=n(0);const o=[{type:"Minor second",def:[0,1]},{type:"Major second",def:[0,2]},{type:"Minor third",def:[0,3]},{type:"Major third",def:[0,4]},{type:"Fourth",def:[0,5]},{type:"Tritone",def:[0,6]},{type:"Fifth",def:[0,7]},{type:"Minor sixth",def:[0,8]},{type:"Major sixth",def:[0,9]},{type:"Minor seventh",def:[0,10]},{type:"Major seventh",def:[0,11]},{type:"Octave",def:[0,12]},{type:"Major",def:[0,4,7]},{type:"minor",def:[0,3,7]},{type:"diminished",def:[0,3,6]},{type:"Augmented",def:[0,4,8]},{type:"Dominant",def:[0,4,7,10]},{type:"Major 7",def:[0,4,7,11]},{type:"minor 7",def:[0,3,7,10]},{type:"half-diminished 7",def:[0,3,6,10]}],r={2:[0,12],3:[12,4],4:[16,4]};t.a=class extends s.a{constructor(e,t,n){super();const s=r[n][0],a=r[n][1],d=e+Math.floor(Math.random()*t);this.chordType=o[s+Math.floor(Math.random()*a)],this.notes=this.chordType.def.map(e=>new i.a(d+e))}get name(){return 2===this.notes.length?`${this.chordType.type} (${this.notes[0].name} - ${this.notes[1].name})`:this.notes[0].name+" "+this.chordType.type}}},function(e,t,n){"use strict";t.a=class{constructor(e,t){const n=window.onkeyup;window.onkeyup=function(s){n&&n(s),s.key===e&&t()}}}}]);